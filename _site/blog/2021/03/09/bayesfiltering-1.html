<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Giseop Kim - Bayesian Filtering 이야기 (1편): posterior 의 mean, covariance 구하기 (수식 유도)</title>
  <meta name="author" content="Giseop Kim" />
  <meta name="description" content="The blog of Giseop Kim" />
  <link rel="canonical" href="http://localhost:4000/blog/2021/03/09/bayesfiltering-1.html" />

  <link href="//fonts.googleapis.com/css?family=Open+Sans:600,800" rel="stylesheet" type="text/css">
  <link rel="shortcut icon" href="/favicon_logo.png" type="image/vnd.microsoft.icon">
  <link rel="alternate" type="application/atom+xml" title="Giseop Kim" href="http://localhost:4000/atom.xml" />

  <!-- see the how-to-use of academicon here http://jpswalsh.github.io/academicons/ -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="/assets/css/all.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

  <!-- 
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        TeX: {
          equationNumbers: {
            autoNumber: "AMS"
          }
        },
        tex2jax: {
        inlineMath: [ ['$', '$'] ],
        displayMath: [ ['$$', '$$'] ],
        processEscapes: true,
      }
    });
    MathJax.Hub.Register.MessageHook("Math Processing Error",function (message) {
          alert("Math Processing Error: "+message[1]);
        });
    MathJax.Hub.Register.MessageHook("TeX Jax - parse error",function (message) {
          alert("Math Processing Error: "+message[1]);
        });
    </script>
    <script type="text/javascript" async
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
   -->

  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true
      }
    });
    </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

    
</head>
<body>
  <div class="container">
    <div class="four columns sidebar">
      <nav>
  <!-- <h1>Hi,</h1> -->

  <!-- <hr class="solid" style="margin-top:+20px"> -->
  
  <p style="margin-top:-7px"> </p>

  <a href="/">
    
    <img src="/logo.png" id="logo" alt="Blog logo" width="150"/>
    
  </a>

  <h2 style="margin-top:-15px"> 
    <!-- <a href="/" style="font-weight:bold" target="_blank">Giseop Kim</a> <a href="/"> blog </a>  -->
    <a href="/" style="font-weight:bold">Giseop Kim</a> <a href="/"> blog </a> 
  </h2>

  <hr class="solid" style="margin-top:+15px">

  <p style="margin-top:-15px">
  </p>

  <div id="bio">
    <br><br> 
    <p style="margin-top:-65px">
      <!-- <span style="vertical-align:150%"> </span><br> -->
      <center> Ph.D. candidate at <a href="https://irap.kaist.ac.kr/" target="_blank"> KAIST </a> </center>
      <!-- <span style="vertical-align:-15%"> </span><br> -->
      <center style="font-size:0.95em"> SLAM researcher/engineer </center>
      <center style="font-size:0.95em"> Spatial AI Enthusiast </center>
    </p>  
    <p>
      <!-- <span style="vertical-align:-15%"> </span><br> -->
      <center style = "margin-top:-10px; font-size:0.9em; letter-spacing:1.3px;"> paulgkim@kaist.ac.kr </center> 
      <!-- font-family:Serif; -->
    </p>
    <!-- <p>
      Edit me in <code>_includes/sidebar.html</code>
    </p> -->
  </div>

  <p style="margin-top:-5px"> </p>
  <div id="social">
    <!-- <center> My channels </center> -->
<center>
<div id="stalker">

  <a title="home" href="/">
    <i class="fa fa-home"></i> 
  </a>

  <a title="notion cv blog" href="http://bit.ly/gk_profile" target="_blank">
    <i class="fa fa-user"></i> 
  </a>

  <a title="CV" href="https://github.com/gisbi-kim/cv-gskim" target="_blank">
    <i class="ai ai-cv"></i> 
  </a>
  
  <a title=" on Scholar" href="https://scholar.google.com/citations?user=9mKOLX8AAAAJ&hl=en" target="_blank">
    <i class="ai ai-google-scholar"></i> 
    <!-- google -->
  </a>

  
  <a title="gisbi-kim on Github" href="https://github.com/gisbi-kim" target="_blank">
    <i class="fa fa-github-square"></i> 
  </a>
  

  <a title=" on Youtube" href="https://www.youtube.com/channel/UCrmVMJ3KEFbDD9EtnAmDT6g" target="_blank">
    <i class="fa fa-youtube-square"></i> 
  </a>

  

  

  

  

  <!-- 
  <a title="GiseopK on Twitter" href="https://twitter.com/GiseopK" target="_blank">
    <i class="fa fa-twitter-square"></i>
  </a>
   -->

  

  

  

  

  

  
</div>
</center>
  </div>

</nav>

    </div>

    <div class="eleven columns content">

      <div class="header">
        <p style="margin-top:-38px"> </p>

<!-- <div class="disclaimer" style="margin-top:+5px"> -->

  <!-- <center style="margin-bottom:-15px">  <a href="/"> Giseop Kim blog </a> </center> -->
  <!-- <a title="home" style="float:right" href="/latestnews/">
    Latest News -->
    <!-- <i class="fa fa-home"></i>  -->
  <!-- </a> -->
  
  <!-- <span>
    <a title="home" style="float:left" href="/aboutme/"> -->
      <!-- About Me  -->
      <!-- <i class="fa fa-home"></i>  -->
    <!-- </a>  
  </span>   -->

  <!-- <span>
    <a title="home" style="float:right" href="/aboutme/"> 
      About Me  -->
      <!-- <i class="fa fa-home"></i>  -->
    <!-- </a>  
  </span>   -->

<!-- </div> -->
      </div> 
      <br>
      <hr class="solid" style="margin-top:+10px">
      <p style="margin-bottom:-20px">
      
      <p class="meta">
  
    [Filtering-based SLAM] ― March 09, 2021   
   
  
  <a href="/">
    <i class="home fa fa-home"></i>
  </a>
</p>

<h1 class="title">Bayesian Filtering 이야기 (1편): posterior 의 mean, covariance 구하기 (수식 유도)</h1>
<hr class="solidlight" style="margin-top:+20px">

<div id="post">
  <h1 id="개요">개요</h1>

<p>SLAM은 filtering-based 와 optimization-based 로 편의상 나눌 수 있다.<br />
(물론 두 방법이 robot 의 state 를 추정하는데 상보적으로 동시에 쓰일수도 있다.)</p>

<p><span style="color:gray"> [Factor graph-based SLAM] </span> 에서는<br />
optimization-based 기반의 SLAM에 대해서 소개하고 있다.</p>

<p>한편,  <span style="color:gray"> [Filtering-based SLAM] </span> 시리즈에서는<br />
filtering-based SLAM 에 대해서 소개하려고 하는데,<br />
이 포스트 (와 몇 편 더) 에서는, 그전에 먼저<br />
filtering-based SLAM의 근간이 되는 Bayesian analysis 자체에 대해 소개하려고 한다.<br />
mathmatical machinary 랄까, 기본을 알면 SLAM은 오히려 쉬울 것이다. 
<br /></p>

<hr />
<h1 id="bayesisan-analysis-란">Bayesisan Analysis 란?</h1>

<h2 id="intro">Intro</h2>

<p>Bayesisan Analysis 이 무엇인지 설명하기 전에,<br />
Bayesisan Analysis 이 왜 필요한지, 예시 상황으로부터 시작해보자.</p>

<p>우리는 어떤 한 시점에서 로봇의 위치를 알고싶다.<br />
이 경우 위치를 $\textbf{x}_{i} = (x, y)$ 의 두 값으로 표현할 수 있다. (heading 은 편의상 생략)</p>

<ul>
  <li>상황 1:
    <p style="margin-top:-15px"> </p>
    <p>로봇은 위치를 추정하기 위해서 GPS를 사용했다. <br />
GPS는 로봇의 위치가 $(1,2)$ 라고 알려주었다 (measurement, $h_1(\cdot)$).</p>

    <p>그래서 로봇은 자기의 위치를 $(1,2)$ 이라고 생각하고 여러 미션을 수행하려고 한다.</p>

    <p>근데 GPS는 로봇의 위치가 다시 $(1.5, 3)$ 라고 알려주었다 (measurement 2, $h_2(\cdot)$).<br />
그래서 로봇은 자기의 위치를 다시 $(1.5, 3)$ 으로 바꿨다.<br />
근데 GPS는 로봇의 위치가 다시 $(2.5, 1)$ 라고 알려주었다 (measurement 3, $h_3(\cdot)$).<br />
그래서 로봇은 자기의 위치를 다시 $(2.5, 1)$ 으로 바꿨다.</p>

    <p>… 무한반복 …<br />
로봇은 확신없이 자기 위치를 결국 추정하지 못하고 결국 세월이 다갔다 …</p>

    <p>이렇게, 매번 개별 measurement만의 가능도 (likelihood) 를 최대화 해주는 방식으로<br />
위치를 추정하는 게 좋은 방법일까?<br />
이러면 그때그때 들어오는 measurement 에 biased 된 예측이 내려질 것이다<sup id="fnref:likelihood" role="doc-noteref"><a href="#fn:likelihood" class="footnote">1</a></sup>.</p>

  </li>
  <li>상황 2:
    <p style="margin-top:-15px"> </p>
    <p>상황1과 똑같이, 로봇은 위치를 추정하기 위해서 GPS를 사용했다. <br />
GPS는 로봇의 위치가 $(1,2)$ 라고 알려주었다 (measurement, $h_1(\cdot)$).</p>

    <p>근데 이 로봇은 자기의 현재 위치가 $(0.5, 2)$ 라고 믿고 있는 상태이다 (prior).<br />
이 값은 현재 시점에서 측정 (measurement) 한 것은 아니지만 로봇이 알고있는 어떤 믿음이다.</p>

    <p>로봇은 이 경우에도 상황1에서와 같이 현재 측정된 정보만을 최대화 하도록<br />
자기의 위치를 추정해야할까?<br />
흠 근데 그건 좀 unreasonable 해 보인다.<br />
prior 와 measurement 두 정보를 모두 고려하는 게 좋을 것 같다.</p>

    <p>근데 만약 prior 와 measurement 두 정보를 모두 고려한다 하더라도,<br />
수학적으로 어떻게 융합하여야 하는가?</p>
  </li>
</ul>

<h2 id="bayesisan-analysis-란-1">Bayesisan Analysis 란?</h2>

<p>Bayesian analysis 는 우리가 알고싶은 parameter (들, variables as vector)의<br />
posterior probability 를 maximize 하는<br />
optimal parameter (그래서 maximum a posteriori, MAP) 를 찾는 방법을 말한다.</p>

<p>다들 알다시피 Bayes Rule 을 쓰면 다음과 같은데</p>

\[\begin{align*}
  p(A \ | \ B) &amp;\propto p(A) \cdot p( B \  | \ A) \\ 
\end{align*}\]

<p>robotics (or 여타 estimation) 에서 실제로 중요한 것은<br />
위에서 $A$와 $B$의 위치가 바뀌는게 베이즈어쩌구구나~ 가 아니라<br />
$A$와 $B$ 자리에 어떤 물리적 의미를 지니는 것이 해당하는지가 중요하다.</p>

\[\begin{align*}
  p(\theta \ | \ \textbf{y}_{1:t}) &amp;\propto p(\theta) \cdot p(\textbf{y}_{1:t} \ | \ \theta) \\ 
  \text{posterior} &amp;\propto \text{posterior} \cdot \text{likelihood}
\end{align*}\]

<p>WIP …</p>

<hr />
<h1 id="요약">요약</h1>

<hr />
<h2 id="예고">예고</h2>

<hr />
<h2 id="생각해보기">생각해보기</h2>

<hr />
<h3 id="주석">주석</h3>
<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:likelihood" role="doc-endnote">
      <p><a href="https://dtransposed.github.io/blog/Bayesian-Linear-Regression.html" target="_blank"> 이 블로그 </a>의 gif 예제를 보면 이해하기 쉽다. <a href="https://dtransposed.github.io/assets/9/batch_1/Data_Space.gif" target="_blank"> data point들이 sequentially 들어올 때 </a>, 그때그때마다의 measurement에만 최대로 fit하는 예측을 내리게 된다면 <a href="https://dtransposed.github.io/assets/9/batch_1/Likelihood.gif" target="_blank"> 이렇게 들쭉날쭉한 결과를 얻게 될 것이다. </a> <a href="#fnref:likelihood" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>

</div>

<br>
<hr class="solid" style="margin-top:+30px">
<div id="related" style="margin-top:-20px">
  <h3>Other posts</h3>
  <ul class="posts" style="margin-top:-15px">
    
    <li>
      <!--  -->
      <span>04 Mar 2021 &raquo;</span> 
      <span style="color:gray"> [Factor graph-based SLAM] &raquo;</span>
      <a href="/blog/2021/03/04/slambackend-1.html">SLAM back-end 이야기 (1편): SLAM은 Ax=b 를 푸는 것이다</a>
      <!--  -->
    </li>
    
    <li>
      <!--  -->
      <span>02 Mar 2021 &raquo;</span> 
      <span style="color:gray"> [Factor graph-based SLAM] &raquo;</span>
      <a href="/blog/2021/03/02/slam-root.html">SLAM의 뿌리를 찾아서</a>
      <!--  -->
    </li>
    
    <li>
      <!--  -->
      <span>02 Mar 2021 &raquo;</span> 
      <span style="color:gray"> [Daily Research] &raquo;</span>
      <a href="/blog/2021/03/02/segmap-build.html">SegMap 빌드하기</a>
      <!--  -->
    </li>
    
    <li>
      <!--  -->
      <span>01 Mar 2021 &raquo;</span> 
      <span style="color:gray"> [Life] &raquo;</span>
      <a href="/blog/2021/03/01/blog-start.html">블로그 시작!</a>
      <!--  -->
    </li>
    
    <li>
      <!--  -->
    </li>
    
    <li>
      <!--  -->
    </li>
    
    <li>
      <!--  -->
    </li>
    
    <li>
      <!--  -->
    </li>
    
  </ul>
</div>


      <div class="footer">
        <div class="disclaimer" style="margin-top:+5px">

  <a title="home" style="float:right" href="/">
    Home <i class="fa fa-home"></i> 
  </a>

  <a title="top" style="float:left" href="#top">
    Top <i class="fa fa-arrow-up"></i> 
  </a>

  <br>

  <!-- 
  <p>
    The postings on this site are my own and don't necessarily represent my 
    employer’s positions, strategies or opinions.
  </p>
   -->
  
  <p>
    © <a href="http://bit.ly/gk_profile"> Giseop Kim </a>, 2021 &mdash; built with <a href="http://jekyllrb.com/">Jekyll</a> using <a href="https://github.com/swanson/lagom">Lagom theme</a>
  </p>
</div>
      </div>

    </div>
  </div>

<!-- 
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-xxxx-x']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
 -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4VNTPFW7FW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4VNTPFW7FW');
</script>

</body>
</html>
